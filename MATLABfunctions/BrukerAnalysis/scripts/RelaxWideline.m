clear allwd = cd;cd(['/opt/topspin/data/DT/nmr']);ExpNam = {'Spindiff'}; expno = 39;basl = [.02 .35 .65 .98];lb = 2;si = 32*1024;ppmshift = 0;%ll = [4085 4240]; ul = [4111 4250];   AutoPhase = 1;CheckBasline = 0;FindPeaks = 1;CheckPeaks = 0;PlotInterm = 1;thresh = .05;td1start = 1;signal = 'area'; signal = 'intensity';cd(ExpNam{1})for nexp = 1:length(expno)    Spec2Dtd1    Std1 = ifft(ifftshift(Itd1,1),si,1);    %%    %figure(1), clf, surf(real(Itd1)), shading('flat'), view(0,90), return    %ntd1 = [1 20 30 34 50];    ntd1 = [1 5 10];    ntd1 = [8 20*8 25*8];    figure(1), clf    subplot(2,1,1)    plot(nu,real(Itd1(:,ntd1)))    axis tight    set(gca,'XDir','reverse','XLim',100e3*[-1 1])    subplot(2,1,2)    semilogy(t,real(Std1(1:td/2,ntd1)))    axis tight    set(gca,'XLim',20e-3*[-.1 1])    %return%%    PlotInterm = 0;    FindPeaks = 0;    CheckPeaks = 0;    ll = [16381 16800];    ul = [16389 16805];        PeakPick               if any(strcmp(NMRacqus.pulprog,{'DT_T2se','DT_dqf_tm','DT_cpxt1'}) == 1)        Xdat = NMRacqus.vd;    elseif any(strcmp(NMRacqus.pulprog,{'DT_inxt1rho','DT_cpxt1rho'}) == 1)        Xdat = 1e-6*NMRacqus.vp;    elseif any(strcmp(NMRacqus.pulprog,{'DT_GSlist'}) == 1)        fid = fopen([num2str(expno(nexp)) '/Df']);        Df = fscanf(fid,'%f');        fclose(fid);        fid = fopen([num2str(expno(nexp)) '/Dm']);        Dm = fscanf(fid,'%f');        fclose(fid);        Xdat = Dm;    end        fitpoints = td1start:NMRacqu2s.td;    fitpoints = [8:8:256]-3;%     PP.Ipeak(:,1) = real(Std1(150,:))';%     PP.Ipeak(:,2) = real(Std1(10000,:))';        ExpFit            fs = 20;    lw = 1;        figure(1), clf        axes('position',[-.02 .18 1.02 .3],'FontSize',fs*.8)        plot(PP.ppm,PP.Ispec,'k','LineWidth',lw)        set(gca,'XDir','reverse','YTick',[],'LineWidth',1.5*lw,'Box','off','TickDir','out','Ycolor',[1 1 1])        axis('tight')        ylim = get(gca,'YLim');        ylim = .05*diff(ylim)*[-1 1] + ylim;        set(gca,'YLim',ylim)        xlabel(['\delta(' NMRacqus.nuc1 ') / ppm'],'FontSize',fs)        hold on        plot(PP.peakppm(PP.td1start,:),PP.Ipeak(PP.td1start,:),'bo','LineWidth',lw)            dleft = .93/Npeaks;        width = .9*dleft;        height = .3;        left = 1-width;        bottom = .55;        if Npeaks == 1, width = .8*1/2; end    for npeak = 1:Npeaks            axes('position',[left bottom width height],'FontSize',fs*.5)            semilogy(FitDat.Xin(:,npeak),FitDat.Yin(:,npeak)/FitDat.Y0(npeak),'bo','LineWidth',lw)            hold on            semilogy(FitDat.Xin(:,npeak),FitDat.Yout(:,npeak)/FitDat.Y0(npeak),'b-','LineWidth',lw)                        axis('tight')            ylim = get(gca,'YLim');            %ylim = .05*abs(diff(ylim))*[-1 1] + abs(ylim); ylim(1) = 0;            ylim = ylim(2)*[1e-3 1.2];            xlim = get(gca,'XLim');            xlim = .05*diff(xlim)*[-1 1] + xlim;            set(gca,'XLim',xlim,'YLim',ylim,'Box','off','YTick',[1e-3 1e-2 1e-1 1],...                'TickDir','out','TickLength',.03*[1 1],'Box','off','LineWidth',1.5*lw)            if npeak == Npeaks                xlabel('t / s','FontSize',fs*.6)                ylabel('I / I_0','FontSize',fs*.6)            end            if npeak < Npeaks                set(gca,'XTickLabel',[],'YTickLabel',[])            end        title({[num2str(PP.peakppm(td1start,npeak),3) ' ppm'];...            [num2str(FitDat.R(npeak),3) ' s^-^1']},'FontSize',fs*.5)        left = left-dleft;    end        eval(['save ' num2str(expno(nexp)) '/RelaxDat PP FitDat'])    delete([num2str(expno(nexp)) '/ReportFig.*'])    eval(['print -depsc -loose ' num2str(expno(nexp)) '/ReportFig'])%%end